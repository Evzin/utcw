/*! Ultimate Tag Cloud Widget - v2.0 alpha - 2012-07-14
* http://0x539.se/wordpress/ultimate-tag-cloud-widget/
* Copyright (c) 2012 Rickard Andersson; Licensed GPLv2 */
(function(a){a.fn.wTooltip=function(b,c){function p(c){c&&(b.degrade?a(l).html(b.content.replace(/<\/?[^>]+>/gi,"")):a(l).html(b.content))}function q(c){function e(a){d&&!b.content&&(d="")}function h(){!j&&b.auto&&(clearInterval(g),b.fadeOut?a(l).fadeOut(b.fadeOut,function(){e(c)}):(e(c),l.style.display="none")),typeof b.callAfter=="function"&&b.callAfter(l,c,b),n&&(b=a.listen(b))}b.timeout>0?f=setTimeout(function(){h()},b.timeout):h()}b=a.extend({content:null,ajax:null,follow:!0,auto:!0,fadeIn:0,fadeOut:0,appendTip:document.body,degrade:!1,offsetY:10,offsetX:1,style:{},className:null,id:null,callBefore:function(a,b,c){},callAfter:function(a,b,c){},clickAction:function(b,c){a(b).hide()},delay:0,timeout:0},b||{}),!b.style&&typeof b.style!="object"?(b.style={},b.style.zIndex="1000"):b.style=a.extend({border:"1px solid gray",background:"#edeef0",color:"#000",padding:"10px",zIndex:"1000",textAlign:"left"},b.style||{}),typeof c=="function"&&(b.callAfter=c||b.callAfter),b.style.display="none",b.style.position="absolute";var d,e,f,g,h={},i=!0,j=!1,k=!1,l=document.createElement("div"),m=typeof document.body.style.maxWidth=="undefined"?!0:!1,n=typeof a.talk=="function"&&typeof a.listen=="function"?!0:!1;b.id&&(l.id=b.id),b.className&&(l.className=b.className),b.degrade=b.degrade&&m?!0:!1;for(var o in b.style)l.style[o]=b.style[o];return b.ajax&&a.get(b.ajax,function(a){a&&(b.content=a),p(b.content)}),a(l).hover(function(){j=!0},function(){j=!1,q(h)}),n&&(b.key=l,b.plugin="wTooltip",b.channel="wayfarer",a.talk(b)),p(b.content&&!b.ajax),a(l).appendTo(b.appendTip),this.each(function(){a(this).hover(function(){function g(){typeof b.callBefore=="function"&&b.callBefore(l,c,b),n&&(b=a.listen(b));var e;b.content?b.degrade||(e="block"):d&&!b.degrade?(a(l).html(unescape(d)),e="block",d=""):e="none",b.auto&&(e=="block"&&b.fadeIn?a(l).fadeIn(b.fadeIn):l.style.display=e)}var c=this;clearTimeout(f),(this.title||this.titleMemKeep)&&!b.degrade&&!b.content&&(d=this.title||this.titleMemKeep,this.title&&(this.titleMemKeep=this.title,this.title="")),b.content&&b.degrade&&(this.title=l.innerHTML),b.delay>0?e=setTimeout(function(){g()},b.delay):g()},function(){clearTimeout(e);var c=this;i=!0,!b.follow||k||b.offsetX<0&&0-b.offsetX<a(l).outerWidth()&&b.offsetY>0&&0-b.offsetY<a(l).outerHeight()?setTimeout(function(){g=setInterval(function(){q(c)},1)},1):q(this)}),a(this).mousemove(function(c){h=this;if(b.follow||i){var d=a(window).scrollTop(),e=a(window).scrollLeft(),f=c.clientY+d+b.offsetY,g=c.clientX+e+b.offsetX,j=a(b.appendTip).outerHeight(),m=a(b.appendTip).innerHeight(),n=a(window).width()+e-a(l).outerWidth(),o=a(window).height()+d-a(l).outerHeight();f=j>m?f-(j-m):f,k=f>o||g>n?!0:!1,g-e<=0&&b.offsetX<0?g=e:g>n&&(g=n),f-d<=0&&b.offsetY<0?f=d:f>o&&(f=o),l.style.top=f+"px",l.style.left=g+"px",i=!1}}),typeof b.clickAction=="function"&&a(this).click(function(){b.clickAction(l,this)})})}})(jQuery),function(a){var b={activeTab:[],tooltipStyle:{border:"solid 1px #6295fb",background:"#fff",color:"#000",padding:"5px",zIndex:1e3},init:function(){a("input[id$=-color_none], input[id$=-color_random], input[id$=-color_set], input[id$=-color_span]").live("click",this.colorClickHandler),a(".utcw-tab-button").live("click",this.tabClickHandler),a("select[id$=-taxonomy]").live("change",this.taxonomyChangeHandler),a(document).ready(this.initTooltip)},initTooltip:function(){a(".utcw-help").wTooltip({style:this.tooltipStyle,className:"utcw-tooltip"})},tabClickHandler:function(){var c=a(this);return c.data("id")==="utcw-__i__"?!1:(c.parent().find(".utcw-tab-button").removeClass("utcw-active"),c.addClass("utcw-active"),c.parent().find("fieldset.utcw").addClass("hidden"),a("#"+c.data("tab")).removeClass("hidden"),b.activeTab[c.data("id")]=c.data("tab"),!1)},colorClickHandler:function(){var b=a("div[id$='set_chooser']"),c=a("div[id$='span_chooser']"),d=a(this).val();b.addClass("utcw-hidden"),c.addClass("utcw-hidden"),d==="set"?b.removeClass("utcw-hidden"):d==="span"&&c.removeClass("utcw-hidden")},taxonomyChangeHandler:function(){var b=a(this),c=b.find(":selected").val(),d=b.parents(".widget-content");d.find("div[id$=-terms]").addClass("hidden"),d.find("#"+c+"-terms").removeClass("hidden")}};b.init()}(jQuery);