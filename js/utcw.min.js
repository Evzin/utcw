/*! Ultimate Tag Cloud Widget - v2.3 - 2013-05-30
* https://0x539.se/wordpress/ultimate-tag-cloud-widget/
* Copyright (c) 2013 Rickard Andersson; Licensed GPLv2 */
(function(b,k){var l={border:"solid 1px #6295fb",background:"#fff",color:"#000",padding:"5px",zIndex:1E3},c={activeTab:{},terms:{},init:function(){b("input[id$=-color_none], input[id$=-color_random], input[id$=-color_set], input[id$=-color_span]").live("click",this.colorClickHandler);b(".utcw-tab-button").live("click",this.tabClickHandler);b(".utcw-input-taxonomy").live("click",this.taxonomyClickHandler);b(".utcw-all-authors").live("click",this.allAuthorsClickHandler);b(".utcw-selected-authors").live("click",
    this.selectedAuthorsClickHandler);b(".utcw-remove-config").live("click",this.removeConfigClickHandler);b(".post-term-search").live("keyup",this.postTermSearchHandler).live("search",this.postTermSearchHandler);b(".utcw-remove-term").live("click",this.removeTermClickHandler);b(document).ready(this.initTooltip);b(document).ajaxSuccess(this.ajaxSuccessHandler);b.post(k,{action:"utcw_get_terms"},function(a){c.terms=a})},initTooltip:function(){b(".utcw-help").wTooltip({style:l,className:"utcw-tooltip"})},
    postTermSearchHandler:function(){var a=b(this),e=b(a.data("result-selector")),h=b(a.data("selected-selector")),f=a.val().toLocaleLowerCase(),d=[];e.text("");if(f){for(var g in c.terms)c.terms.hasOwnProperty(g)&&c.terms[g].forEach(function(a){-1!==a.name.toLocaleLowerCase().indexOf(f)&&d.push(a)});d.forEach(function(d){var f=b(document.createElement("li")),g=b(document.createElement("a"));g.text(d.name+" ("+d.taxonomy+")");g.data("id",d.term_id);g.click(c.postTermSearchClickHandler(h,a));f.append(g);
        e.append(f)})}},postTermSearchClickHandler:function(a,e){return function(){var c=b(this),f=b(document.createElement("li")),d=b(document.createElement("a")),g=b(document.createElement("span")),j=b(document.createElement("input")),k=c.parent().parent();f.text(c.text());j.attr("type","hidden");j.val(c.data("id"));j.attr("name",e.data("input-name")+"[]");d.addClass("submitdelete");d.addClass("deletion");d.addClass("utcw-remove-term");d.text(e.data("delete"));g.addClass("submitbox");g.append(d);f.append(g);
        f.append(j);a.append(f);k.text("");e.val("")}},removeTermClickHandler:function(){b(this).parent().parent().remove()},removeConfigClickHandler:function(){var a=b(this),e=c.findWidgetParent(a).find(".utcw-load-config"),h=e.val(),f=a.data("input-name")+"[]",d=b(document.createElement("input"));d.attr("type","hidden");d.attr("name",f);d.attr("value",h);a.after(d);e.find(":selected").remove()},allAuthorsClickHandler:function(){var a=b(this),a=c.findWidgetParent(a);a.find(".utcw-authors").addClass("hidden");
        a.find(".utcw-author-field").attr("checked",!1)},selectedAuthorsClickHandler:function(){var a=b(this);c.findWidgetParent(a).find(".utcw-authors").removeClass("hidden")},tabClickHandler:function(){var a=b(this);if("utcw-__i__"===a.data("id"))return!1;a.parent().find(".utcw-tab-button").removeClass("utcw-active");a.addClass("utcw-active");a.parent().find("fieldset.utcw").addClass("hidden");b("#"+a.data("tab")).removeClass("hidden");c.activeTab[a.data("id")]=a.data("tab");return!1},colorClickHandler:function(){var a=
        b('div[id$="set_chooser"]'),e=b('div[id$="span_chooser"]'),c=b(this).val();a.addClass("utcw-hidden");e.addClass("utcw-hidden");"set"===c?a.removeClass("utcw-hidden"):"span"===c&&e.removeClass("utcw-hidden")},findWidgetParent:function(a){return a.parents(".widget-content")},taxonomyClickHandler:function(){var a=b(this),e=a.val(),h=a.is(":checked"),a=c.findWidgetParent(a).find("#"+e+"-terms");h?a.removeClass("hidden"):a.addClass("hidden")},ajaxSuccessHandler:function(a,b,h){c.setCurrentTab.apply(c,
        [h.data]);c.initTooltip.apply(c)},setCurrentTab:function(a){var c=new Uri;c.setQuery(decodeURI(a));"save-widget"===c.getQueryParamValue("action")&&"utcw"===c.getQueryParamValue("id_base")&&(a=c.getQueryParamValue("widget-id"),this.activeTab[a]&&b('button[data-tab="'+this.activeTab[a]+'"]').trigger("click"))}};c.init()})(jQuery,ajaxurl);